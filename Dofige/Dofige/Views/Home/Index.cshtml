@model Dofige.DataModels.PagerModel
@{
    //Layout = null;
}

<script src="~/Scripts/FinancialMain.js"></script>

<div class="container">
    <div class="row">
        <div class="col-lg-12">

            <div class="col-lg-4">
                <div class="panel panel-default">
                    <div class="panel panel-heading">
                        Фильтры
                    </div>
                    <div class="panel panel-body">
                        @Filters()
                        <hr />
                        <div>
                            @CategoryList()
                        </div>
                        <div>
                            @SubcategoryList()
                        </div>
                        <div>
                            @TypeList()
                        </div>
                    </div>

                    <div><input class="btn btn-primary" type="button" value="Фильтровать" id="filter_butt" /></div>
                </div>
                <div class="panel panel-info">
                    <div class="panel panel-heading">
                        @DHeader()
                    </div>
                    <div class="panel panel-body">
                        @Diagrams()
                    </div>
                </div>
            </div>
            <div class="col-lg-8">
                <div>@Html.ActionLink("Внести данные", "Newrecord", null, new { @class = "btn btn-primary" })</div>

                <div class="panel panel-success">
                    <div class="panel panel-heading">
                    </div>
                    <div class="panel panel-body">
                        @Html.Partial("ListPart")
                    </div>
                    <div class="panel-footer">
                        @Pagination()
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="listpath" data-urllist_main="@Url.Action("ListPart", "Home")"></div>

     @helper Chart() {   @*<div class="ibox float-e-margins">
                        <div class="ibox-title">
                            <h5>Pie Chart Example</h5>
                            <div class="ibox-tools">
                                <a class="collapse-link">
                                    <i class="fa fa-chevron-up"></i>
                                </a>
                                <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
                                    <i class="fa fa-wrench"></i>
                                </a>
                                <ul class="dropdown-menu dropdown-user">
                                    <li><a href="#">Config option 1</a>
                                    </li>
                                    <li><a href="#">Config option 2</a>
                                    </li>
                                </ul>
                                <a class="close-link">
                                    <i class="fa fa-times"></i>
                                </a>
                            </div>
                        </div>
                        <div class="ibox-content" style="display: block;">
                            <div class="flot-chart">
                                <div class="flot-chart-pie-content" id="flot-pie-chart" style="padding: 0px; position: relative;"><canvas class="flot-base" width="200" height="200" style="direction: ltr; position: absolute; left: 0px; top: 0px; width: 200px; height: 200px;"></canvas><canvas class="flot-overlay" width="200" height="200" style="direction: ltr; position: absolute; left: 0px; top: 0px; width: 200px; height: 200px;"></canvas><div class="legend"><div style="position: absolute; width: 54px; height: 60px; top: 5px; right: 5px; opacity: 0.85; background-color: rgb(255, 255, 255);"> </div><table style="position:absolute;top:5px;right:5px;;font-size:smaller;color:#545454"><tbody><tr><td class="legendColorBox"><div style="border:1px solid #ccc;padding:1px"><div style="width:4px;height:0;border:5px solid #d3d3d3;overflow:hidden"></div></div></td><td class="legendLabel">Sales 1</td></tr><tr><td class="legendColorBox"><div style="border:1px solid #ccc;padding:1px"><div style="width:4px;height:0;border:5px solid #bababa;overflow:hidden"></div></div></td><td class="legendLabel">Sales 2</td></tr><tr><td class="legendColorBox"><div style="border:1px solid #ccc;padding:1px"><div style="width:4px;height:0;border:5px solid #79d2c0;overflow:hidden"></div></div></td><td class="legendLabel">Sales 3</td></tr><tr><td class="legendColorBox"><div style="border:1px solid #ccc;padding:1px"><div style="width:4px;height:0;border:5px solid #1ab394;overflow:hidden"></div></div></td><td class="legendLabel">Sales 4</td></tr></tbody></table></div></div>
                            </div>
                        </div>
                    </div>*@  }
     @helper Graph() {
    <div class="stat-panel">
        <div class="stat-row">

            <div class="stat-cell bg-primary padding-sm valign-middle">
                <div id="hero-graph" class="graph" style="height: 230px;">
                    <svg height="230" version="1.1" width="442"
                         xmlns="http://www.w3.org/2000/svg" style="overflow: hidden; position: relative;">
                        <desc style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Created with Raphaël 2.1.2</desc>
                        <defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></defs>
                        <text x="26.5" y="191" text-anchor="end" font="10px &quot;Arial&quot;" stroke="none" fill="#ffffff"
                              style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: end; font-style: normal; font-variant: normal;
font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: sans-serif;" font-size="12px" font-family="sans-serif" font-weight="normal">
                            <tspan dy="4"
                                   style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">0</tspan>
                        </text>
                        <path fill="none" stroke="#ffffff" d="M39,191H417" stroke-opacity="0.5"
                              stroke-width="0.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                        <text x="26.5" y="149.5" text-anchor="end" font="10px &quot;Arial&quot;"
                              stroke="none" fill="#ffffff" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: end; font-style: normal; font-variant: normal;
font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: sans-serif;" font-size="12px" font-family="sans-serif" font-weight="normal">
                            <tspan dy="4"
                                   style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">5</tspan>
                        </text>
                        <path fill="none" stroke="#ffffff" d="M39,149.5H417" stroke-opacity="0.5"
                              stroke-width="0.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
                        </path>
                        <text x="26.5" y="108" text-anchor="end" font="10px &quot;Arial&quot;" stroke="none" fill="#ffffff"
                              style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: end; font-style: normal;
font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: sans-serif;" font-size="12px"
                              font-family="sans-serif" font-weight="normal"><tspan dy="4" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">10</tspan></text>
                        <path fill="none" stroke="#ffffff" d="M39,108H417"
                              stroke-opacity="0.5" stroke-width="0.5"
                              style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                        <text x="26.5" y="66.49999999999999" text-anchor="end" font="10px &quot;Arial&quot;" stroke="none" fill="#ffffff" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: end; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: sans-serif;" font-size="12px" font-family="sans-serif" font-weight="normal"><tspan dy="3.999999999999986" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">15</tspan></text>
                        <path fill="none" stroke="#ffffff" d="M39,66.49999999999999H417" stroke-opacity="0.5" stroke-width="0.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                        <text x="26.5" y="25" text-anchor="end" font="10px &quot;Arial&quot;" stroke="none" fill="#ffffff" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: end; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: sans-serif;" font-size="12px" font-family="sans-serif" font-weight="normal"><tspan dy="4" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">20</tspan></text>
                        <path fill="none" stroke="#ffffff" d="M39,25H417" stroke-opacity="0.5" stroke-width="0.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                        <text x="417" y="203.5" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#ffffff" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: sans-serif;" font-size="12px" font-family="sans-serif" font-weight="normal" transform="matrix(1,0,0,1,0,7)"><tspan dy="4" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Mar 16</tspan></text>
                        <text x="354" y="203.5" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#ffffff" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: sans-serif;" font-size="12px" font-family="sans-serif" font-weight="normal" transform="matrix(1,0,0,1,0,7)"><tspan dy="4" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Mar 15</tspan></text>
                        <text x="291" y="203.5" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#ffffff" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: sans-serif;" font-size="12px" font-family="sans-serif" font-weight="normal" transform="matrix(1,0,0,1,0,7)"><tspan dy="4" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Mar 14</tspan></text>
                        <text x="228" y="203.5" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#ffffff" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: sans-serif;" font-size="12px" font-family="sans-serif" font-weight="normal" transform="matrix(1,0,0,1,0,7)"><tspan dy="4" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Mar 13</tspan></text>
                        <text x="165" y="203.5" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#ffffff" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: sans-serif;" font-size="12px" font-family="sans-serif" font-weight="normal" transform="matrix(1,0,0,1,0,7)"><tspan dy="4" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Mar 12</tspan></text>
                        <text x="102" y="203.5" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#ffffff" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: sans-serif;" font-size="12px" font-family="sans-serif" font-weight="normal" transform="matrix(1,0,0,1,0,7)"><tspan dy="4" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Mar 11</tspan></text>
                        <text x="39" y="203.5" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#ffffff" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: sans-serif;" font-size="12px" font-family="sans-serif" font-weight="normal" transform="matrix(1,0,0,1,0,7)"><tspan dy="4" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Mar 10</tspan></text>
                        <path fill="none" stroke="#ffffff" d="M39,25C54.75,45.75,86.25,102.8125,102,108C117.75,113.1875,149.25,68.57499999999999,165,66.49999999999999C180.75,64.42499999999998,212.25,81.02499999999999,228,91.39999999999999C243.75,101.77499999999999,275.25,142.2375,291,149.5C306.75,156.7625,338.25,165.0625,354,149.5C369.75,133.9375,401.25,56.125,417,25" stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                        <circle cx="39" cy="25" r="4" fill="#ffffff" stroke="#ffffff" stroke-width="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></circle>
                        <circle cx="102" cy="108" r="4" fill="#ffffff" stroke="#ffffff" stroke-width="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></circle>
                        <circle cx="165" cy="66.49999999999999" r="4" fill="#ffffff" stroke="#ffffff" stroke-width="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></circle>
                        <circle cx="228" cy="91.39999999999999" r="4" fill="#ffffff" stroke="#ffffff" stroke-width="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></circle>
                        <circle cx="291" cy="149.5" r="4" fill="#ffffff" stroke="#ffffff" stroke-width="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></circle>
                        <circle cx="354" cy="149.5" r="4" fill="#ffffff" stroke="#ffffff" stroke-width="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></circle>
                        <circle cx="417" cy="25" r="4" fill="#ffffff" stroke="#ffffff" stroke-width="1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></circle>
                    </svg>
                    <div class="morris-hover morris-default-style" style="left: 365px; top: 35px;">
                        <div class="morris-hover-row-label">2014-03-10</div>
                        <div class="morris-hover-point" style="color: #fff">
                            Value:
                            20
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}

@helper Diagrams()
{

    <div class="tab-content">
        <div class="tab-pane active" id="bs-tabdrop-pill1">
            @Graph()
        </div>
        <div class="tab-pane" id="bs-tabdrop-pill2">
            @Chart()
        </div>
        <div class="tab-pane" id="bs-tabdrop-pill3">
            <p>Howdy, I'm in Section 2.</p>
        </div>
    </div>
}
@helper DHeader()
{
    <ul class="nav nav-pills bs-tabdrop-example">
        <li class="active" aria-expanded="true"><a href="#bs-tabdrop-pill1" data-toggle="tab">График</a></li>
        <li class=""><a href="#bs-tabdrop-pill2" data-toggle="tab">Диаграмма</a></li>
        <li class=""><a href="#bs-tabdrop-pill3" data-toggle="tab">Таблица</a></li>
    </ul>
}

@helper TypeList()
{
    <select class="ddl_type form-control" data-val="true" data-val-number="The field CatID must be a number." data-val-required="Требуется поле CatID.">
        <option value="">Тип</option>
        @foreach (var i in ViewBag.Types)
        {
            <option value="@i.typeID">@i.typeName</option>
        }
    </select>
}

@helper CategoryList()
{
    @*<label>Категория</label>*@
    <select class="ddl_cat form-control" data-val="true" data-val-number="The field CatID must be a number." data-val-required="Требуется поле CatID.">
        <option value="">Категория</option>
        @foreach (var i in ViewBag.Categories)
        {
            <option value="@i.CatID">@i.CatName</option>
        }
    </select>
}


@helper SubcategoryList()
{
    @*<label>Подкатегория</label>*@
    @Html.DropDownListFor(m => m.Finance[0].Category.Subcategory.SubCatID, (ViewBag.Subcategories as SelectList), "Подкатегория", new { @class = "sub_ddl form-control", value = "{0}" })
}

@helper Pagination()
{

    <ul class="pagination">
        <li class="disabled"><a href="#">«</a></li>
        <li class="active"><a href="#">1 </a></li>
        @for (var i = 2; i < Model.TotalPages + 1; i++) {
        <li><a href="#">@i</a></li>
        }
        <li><a href="#">»</a></li>      
    </ul>
    <div>Страница @Model.Filter.current_page из @Model.TotalPages</div>

}

@helper Filters()
{
    @*<label>Даты</label>*@
    <div id="beginPeriod" class="input-group input-group-sm date">
        <input type="text" id="BeginPeriod" class="form-control filter_txt" placeholder="Дата з">
        <span class="input-group-addon input-group-sm">
            <i class="glyphicon glyphicon-th"></i>
        </span>
    </div>
    <div id="endPeriod" class="input-group input-group-sm date">
        <input type="text" id="EndPeriod" class="form-control filter_txt" placeholder="Дата по">
        <span class="input-group-addon input-group-sm">
            <i class="glyphicon glyphicon-th"></i>
        </span>
    </div>

}

@helper MainContent()
{
    <table class="table">
        <tr>
            <th>Категория</th>
            <th>Подкатегория</th>
            <th>Сумма</th>
            <th>Дата</th>
            <th style="width:5%"></th>
            <th style="width:5%"></th>
        </tr>
        @foreach (var i in Model.Finance)
        {
            <tr>
                <td>@i.Category.CatName</td>
                <td>@i.Category.Subcategory.SubCatName</td>
                <td>@i.amount</td>
                <td>@i.data.ToString("dd.MM.yyy")</td>
                <td><button class="btn btn-sm btn-primary"><i class="glyphicon glyphicon-pencil" aria-hidden="true"></i></button></td>
                <td><button class="btn btn-sm btn-primary"><i class="glyphicon glyphicon-remove" aria-hidden="true"></i></button></td>

            </tr>
        }
    </table>

}
